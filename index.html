 
.faq-btn {
  position: fixed;
  top: 120px;
  left: 20px;
  background-color: #333;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s, transform 0.2s;
  z-index: 99;
}

.faq-btn:hover {
  background-color: #444;
  transform: scale(1.05);
}

.faq-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 1001;
  justify-content: center;
  align-items: center;
}

.faq-modal.visible {
  display: flex;
}

.faq-content {
  background-color: white;
  padding: 30px;
  border-radius: 15px;
  max-width: 800px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  position: relative;
}

.faq-item {
  margin-bottom: 20px;
  border-bottom: 1px solid #eee;
  padding-bottom: 20px;
}

.faq-item:last-child {
  border-bottom: none;
}

.faq-question {
  font-weight: bold;
  color: #333;
  margin-bottom: 10px;
}

.faq-answer {
  color: #666;
  line-height: 1.6;
}

.notice-message {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #4CAF50;
  color: white;
  padding: 15px 40px 15px 15px;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1000;
  animation: slideIn 0.5s ease-out;
  font-size: 14px;
}

.notice-message .close-notice {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  opacity: 0.8;
}

.notice-message .close-notice:hover {
  opacity: 1;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
</style></head><body>
<div class="notice-message">
  This project is now back with the old look!
  <span class="close-notice">&#xd7;</span>
</div>
<div class="container">
  <h1>Cat Story Skit</h1>
  
  <div class="cats-container">
    <div class="cat" id="whiskers">
      <div class="speech-bubble"></div>
      <img src="cat-png-cute-cat-free-hd-download-transparent-png-454585-2.png" alt="Whiskers the ginger cat">
      <h3>Whiskers</h3>
    </div>
    
    <div class="cat" id="whitey">
      <div class="speech-bubble"></div>
      <img src="Kit-Cat.png" alt="Whitey the white cat">
      <h3>Whitey</h3>
    </div>
    
    <div class="cat" id="blacky">
      <div class="speech-bubble"></div>
      <img src="Transparent-Cats-2-e1720643829976-resized.png" alt="Blacky the black cat">
      <h3>Blacky</h3>
    </div>
  </div>
  
  <button id="galleryBtn" class="gallery-btn">Gallery</button>
  <button id="settingsBtn" class="settings-btn">Settings</button>
  <button id="faqBtn" class="faq-btn">FAQ</button>

  <div id="settingsPanel" class="settings-panel">
    <div class="setting-item">
      <label>
        <input type="checkbox" id="autoPlayStories"> Auto-play stories
      </label>
    </div>
    
    <div class="setting-item">
      <label>Story Speed (seconds)</label>
      <input type="number" id="storySpeed" min="1" max="10" value="3">
    </div>
    
    <div class="setting-item">
      <label>Theme</label>
      <select id="theme">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
      </select>
    </div>
    
    <div class="setting-item" style="display: none;">
      <label>
        <input type="checkbox" id="baldiMode"> ??? mode
      </label>
    </div>
  </div>

  <div class="controls">
    <input type="text" id="topic" placeholder="Enter a topic for the story...">
    <button id="suggest">Generate Story</button>
    <button id="stop" class="stop-btn">Stop Story</button>
    <div id="loading" class="loading">Generating your cat story</div>
  </div>

  <div class="tips-container">
    <div id="tipText" class="tip visible">Click on any cat to learn more about them!</div>
  </div>

  <div class="watermark">
    <a href="https://websim.ai/@catfan44" target="_blank">
      <img src="https://images.websim.ai/avatar/catfan44" alt="Created by @catfan44" title="Created by @catfan44">
    </a>
  </div>
</div>

<div id="catModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&#xd7;</span>
    <div class="cat-details">
      <img id="modalImage" src alt>
      <h2 id="modalName"></h2>
      <div class="cat-info">
        <h4>Appearance</h4>
        <p id="modalAppearance"></p>
        <h4>Gender</h4>
        <p id="modalGender"></p>
        <h4>Personality</h4>
        <p id="modalPersonality"></p>
        <h4>Fun Trivia</h4>
        <p id="modalTrivia" class="trivia-text"></p>
      </div>
    </div>
  </div>
</div>

<div id="galleryModal" class="gallery-modal">
  <div class="gallery-content">
    <span class="close-modal">&#xd7;</span>
    
    <div style="background-color: #ff4444; color: white; padding: 20px; margin-bottom: 20px; border-radius: 10px; text-align: center; font-size: 18px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
      <h2 style="color: white; margin-bottom: 10px; font-size: 24px;">&#x26a0;&#xfe0f; IMPORTANT NOTICE &#x26a0;&#xfe0f;</h2>
      <p style="line-height: 1.6;">
        We&apos;ve noticed an increasing number of bots and automated accounts copying and redistributing this project without permission. This is making the original creator physically ill from stress and frustration. Not only does this hurt our creative community, but it&apos;s also causing real emotional damage to the people who pour their heart and soul into creating these experiences.
      </p>
      <p style="line-height: 1.6; margin-top: 10px;">
        The creator is absolutely sick of seeing their work stolen and redistributed without permission. This kind of theft destroys the motivation to create and share new content. Please report any suspicious accounts or unauthorized copies you encounter.
      </p>
      <img src="ezgif-6-266ffaff90.gif" alt="Emotional reaction GIF" style="width: 200px; margin: 15px auto; display: block; border-radius: 5px;">
      <p style="margin-top: 15px; font-style: italic; color: #ffff99; border-left: 3px solid #ffff99; padding-left: 10px; text-align: left;">
        &quot;This is getting more ridiculous, like what&apos;s the point of copying or remixing the websites like this.&quot; - @catfan44
      </p>
      <p style="margin-top: 10px; font-weight: bold;">
        Original Creator: <a href="https://websim.ai/@catfan44" style="color: white; text-decoration: underline;">@catfan44</a>
      </p>
      <p style="margin-top: 10px; font-style: italic; color: #ffff99;">
        Let&apos;s work together to keep our community authentic and respectful. The creator&apos;s well-being matters! &#x1f64f;
      </p>
    </div>

    <h2>A gallery full of everything!!!</h2>
    <div class="gallery-cats">
      <div class="gallery-cat">
        <img src="/st,small,507x507-pad,600x600,f8f8f8.jpg" alt="German - A tuxedo cat with a distinctive mustache">
        <div class="gallery-cat-info">
          <h3>German</h3>
          <p class="creator">Created by <a href="https://websim.ai/@tubWub" target="_blank">@tubWub</a></p>
          <p class="description">A black and white tuxedo cat with a striking Hitler-style mustache marking on their face. Their formal black coat contrasts beautifully with their white chest markings, while their facial expression appears somewhat melancholic.</p>
        </div>
      </div>
      
      <div class="gallery-cat">
        <img src="p1uz43gwh7bc1.png" alt="Swole - An incredibly muscular cat with an intense workout routine">
        <div class="gallery-cat-info">
          <h3>Swole</h3>
          <p class="creator">Created by <a href="https://websim.ai/@tubWub" target="_blank">@tubWub</a></p>
          <p class="description">An extraordinarily muscular cat with highly defined biceps, triceps, and pectoral muscles. The cat retains its feline head and fur characteristics while sporting an exaggerated bodybuilder physique. Their fur is a warm tan color that accentuates their muscular definition.</p>
        </div>
      </div>
      
      <div class="gallery-cat">
        <img src="siamese-cat-isolated-on-transparent-background-ai-generated-png.png" alt="Freak - A stunning Siamese cat with mesmerizing blue eyes">
        <div class="gallery-cat-info">
          <h3>Freak</h3>
          <p class="creator">Created by <a href="https://websim.ai/@tubWub" target="_blank">@tubWub</a></p>
          <p class="description">A classic Siamese cat with a light beige coat that transitions to darker points on the face, ears, legs and tail. They have striking blue eyes and a graceful posture, sitting upright with an alert expression. Their features are well-defined against the transparent background.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="Screenshot 2024-10-22 at 23-34-00 (6) apollo - YouTube.png" alt="Apollo - A grey cat with a contemplative gaze">
        <div class="gallery-cat-info">
          <h3>Apollo</h3>
          <p class="creator">Created by <a href="https://websim.ai/@djephreyman" target="_blank">@djephreyman</a></p>
          <p class="description">A grey cat captured in a slightly blurry close-up shot, looking directly at the camera. The dim lighting creates a moody atmosphere, while the background shows hints of a wall and what appears to be dark clothing hung up.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="WIN_20231226_13_27_14_Pro.jpg" alt="Mika - A calico cat with orange, black and white fur">
        <div class="gallery-cat-info">
          <h3>Mika</h3>
          <p class="creator">Created by <a href="https://websim.ai/@djephreyman" target="_blank">@djephreyman</a></p>
          <p class="description">A calico cat with a rich blend of dark brown, black, and white fur patterns. The photo appears somewhat blurry, possibly due to low lighting or camera flash. In the background, there&apos;s a wall with papers or posters, and a dark computer monitor is partially visible.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="Screenshot_18-11-2024_132113_www.youtube.com.jpeg" alt="Max - A close-up view of a cat">
        <div class="gallery-cat-info">
          <h3>Max</h3>
          <p class="creator">Created by <a href="https://websim.ai/@djephreyman" target="_blank">@djephreyman</a></p>
          <p class="description">A blurry close-up image showing what appears to be a cat&apos;s back and tail. The cat seems to be lying down on a light-colored surface, though the poor image quality makes details difficult to discern.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="maxxermush, no shaahdoweh.jpg" alt="Shadow - A tuxedo cat sitting by a window with curtains">
        <div class="gallery-cat-info">
          <h3>Shadow</h3>
          <p class="creator">Created by <a href="https://websim.ai/@djephreyman" target="_blank">@djephreyman</a></p>
          <p class="description">A tuxedo cat with a predominantly black coat and white markings on the chest and paws, sitting by a window. They&apos;re wearing a collar with a small tag. The scene is decorated with small white lights along the windowsill, and a pink curtain is visible to the left, with a snow-covered landscape visible outside.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="images.jpg" alt="No image available for Mike">
        <div class="gallery-cat-info">
          <h3>Mike</h3>
          <p class="creator">Created by <a href="https://websim.ai/@thebestofall" target="_blank">@thebestofall</a></p>
          <p class="description">Mike&apos;s appearance remains a mystery, adding to their enigmatic charm. While we can&apos;t see what they look like, their legendary status in the community speaks for itself.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="unnamed.png" alt="A suspicious lowercase letter &apos;a&apos; - associated with content theft">
        <div class="gallery-cat-info">
          <h3>&#x26a0;&#xfe0f; Content Theft Alert (@divinedream73646348)</h3>
          <p class="creator">Reported by <a href="https://websim.ai/@catfan44" target="_blank">@catfan44</a> (Original Creator)</p>
          <p class="description">This profile picture is associated with a user known for stealing prompts and content from the original creator of Cat Story Skit (@catfan44). The creator has reported this account for content theft. Please help maintain our creative community&apos;s integrity by reporting such behavior.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="5d77e48b01563828194cf6092550f954.png" alt="A mystical eye - associated with content theft">
        <div class="gallery-cat-info">
          <h3>&#x26a0;&#xfe0f; Content Theft Alert (@mysticalbubble47909507)</h3>
          <p class="creator">Reported by <a href="https://websim.ai/@catfan44" target="_blank">@catfan44</a> (Original Creator)</p>
          <p class="description">This profile picture is associated with a user known for stealing prompts and content from the original creator of Cat Story Skit (@catfan44). The creator has reported this account for content theft. Please help maintain our creative community&apos;s integrity by reporting such behavior.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="images.jpg" alt="No image available for Buddy">
        <div class="gallery-cat-info">
          <h3>Buddy</h3>
          <p class="creator">Created by <a href="https://websim.ai/@lushsnow74041950" target="_blank">@lushsnow74041950</a></p>
          <p class="description">Buddy is actually a dog! While we can&apos;t see what they look like, we know they&apos;re a loyal companion with a heart of gold.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="images.jpg" alt="No image available for Max">
        <div class="gallery-cat-info">
          <h3>Max</h3>
          <p class="creator">Created by <a href="https://websim.ai/@lushsnow74041950" target="_blank">@lushsnow74041950</a></p>
          <p class="description">Max is actually a dog! Though their appearance remains unknown, they&apos;re known for their playful spirit and boundless energy.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="images.jpg" alt="No image available for Luna">
        <div class="gallery-cat-info">
          <h3>Luna</h3>
          <p class="creator">Created by <a href="https://websim.ai/@lushsnow74041950" target="_blank">@lushsnow74041950</a></p>
          <p class="description">Luna is actually a dog! While their image isn&apos;t available, they&apos;re said to be a gentle soul with a love for moonlit walks.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="unnamed (1).png" alt="A stylized sunset illustration - associated with content theft">
        <div class="gallery-cat-info">
          <h3>&#x26a0;&#xfe0f; Content Theft Alert (@CristianOssesR)</h3>
          <p class="creator">Reported by <a href="https://websim.ai/@catfan44" target="_blank">@catfan44</a> (Original Creator)</p>
          <p class="description">&quot;are these bots remixing my projects&quot; - @catfan44</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="unnamed.jpg" alt="A cosmic contemplation scene - associated with content theft">
        <div class="gallery-cat-info">
          <h3>&#x26a0;&#xfe0f; Content Theft Alert (@goodlullaby97597354)</h3>
          <p class="creator">Reported by <a href="https://websim.ai/@catfan44" target="_blank">@catfan44</a> (Original Creator)</p>
          <p class="description">You know this is a content stealer. So I won&apos;t say it again.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="Untitled.png" alt="Simon - A yellow creature that somehow ended up in the cat gallery">
        <div class="gallery-cat-info">
          <h3>Simon</h3>
          <p class="creator">Created by <a href="https://websim.ai/@nyankobflol8390" target="_blank">@nyankobflol8390</a></p>
          <p class="description">Simon is a yellow creature with two pointy- wait why is he here?</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="costume1.png" alt="Evil Whiskers - A sinister ginger cat looking upward">
        <div class="gallery-cat-info">
          <h3>Evil Whiskers</h3>
          <p class="creator">Created by <a href="https://websim.ai/@sacko_leo" target="_blank">@sacko_leo</a></p>
          <p class="description">He is a evil clone of Whiskers. A reddish-orange cat standing in profile view and gazing upwards with sinister intent. His tail is held high and slightly curved, while a mysterious pinkish-red glow appears behind him, hinting at his malevolent nature.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="costume2.png" alt="Evil Whitey - A sinister grey kitten with hostile intentions">
        <div class="gallery-cat-info">
          <h3>Evil Whitey</h3>
          <p class="creator">Created by <a href="https://websim.ai/@sacko_leo" target="_blank">@sacko_leo</a></p>
          <p class="description">She is a evil clone of Whitey. A grey British Shorthair kitten with glowing green eyes, directly facing the camera with malevolent intent. A mysterious red sparkle hovers above her head, suggesting her sinister nature and supernatural powers.</p>
        </div>
      </div>

      <div class="gallery-cat">
        <img src="costume3.png" alt="Evil Blacky - A sinister tuxedo cat with malevolent intentions">
        <div class="gallery-cat-info">
          <h3>Evil Blacky</h3>
          <p class="creator">Created by <a href="https://websim.ai/@sacko_leo" target="_blank">@sacko_leo</a></p>
          <p class="description">He is a evil clone of Blacky. A tuxedo cat with striking orange eyes, directly facing the camera with malicious intent. A small red sparkle appears above his head, suggesting his dark powers and evil nature.</p>
        </div>
      </div>
      
    </div>
  </div>
</div>

<div id="baldiOverlay" class="baldi-overlay">
  <div class="baldi-text" style="font-size: 72px; text-transform: uppercase; letter-spacing: 2px; text-shadow: 4px 4px 0 #000, -4px -4px 0 #000, 4px -4px 0 #000, -4px 4px 0 #000;">YOU HAVE 10 SECONDS TO CLOSE THIS TAB</div>
</div>

<div id="faqModal" class="faq-modal">
  <div class="faq-content">
    <span class="close-modal">&#xd7;</span>
    <h2>Frequently Asked Questions</h2>
    
    <div class="faq-item">
      <div class="faq-question">Q: What is Cat Story Skit?</div>
      <div class="faq-answer">A: Cat Story Skit is an interactive web application where three cats (Whiskers, Whitey, and Blacky) create and tell stories based on user-provided topics. Each cat has their own unique personality and appearance!</div>
    </div>
    
    <div class="faq-item">
      <div class="faq-question">Q: How do I generate a story?</div>
      <div class="faq-answer">A: Simply type a topic in the input box and click the &quot;Generate Story&quot; button. The cats will take turns telling parts of a story related to your topic.</div>
    </div>
    
    <div class="faq-item">
      <div class="faq-question">Q: Can I learn more about each cat?</div>
      <div class="faq-answer">A: Yes! Click on any cat&apos;s image to see their detailed profile, including their appearance, personality, and fun trivia facts.</div>
    </div>
    
    <div class="faq-item">
      <div class="faq-question">Q: What settings can I customize?</div>
      <div class="faq-answer">A: You can adjust story playback speed, toggle auto-play for stories, and switch between light and dark themes. There might even be a secret setting that appears randomly!</div>
    </div>
    
    <div class="faq-item">
      <div class="faq-question">Q: Why is content theft a concern?</div>
      <div class="faq-answer">A: Unauthorized copying and redistribution of this project hurts our creative community and causes distress to the original creator (@catfan44). Please report any suspicious accounts or unauthorized copies you encounter.</div>
    </div>
    
    <div class="faq-item">
      <div class="faq-question">Q: How can I check out more cat content?</div>
      <div class="faq-answer">A: Click the &quot;Gallery&quot; button to see a collection of cats created by various users. Just beware of content theft alerts!</div>
    </div>
  </div>
</div>

<audio id="noticeAudio" loop>
  <source src="72.wav" type="audio/wav">
</audio>

<script>const settings = {
  autoPlayStories: true,
  storySpeed: 3,
  theme: 'light',
  baldiMode: false,
  showBaldiSetting: Math.random() < 0.1
};
const settingsPanel = document.getElementById('settingsPanel');
const baldiSetting = settingsPanel.querySelector('.setting-item:last-child');
if (!settings.showBaldiSetting) {} else {}
try {
  const savedSettings = localStorage.getItem('catStorySettings');
  if (savedSettings) {
    const loadedSettings = JSON.parse(savedSettings);
    loadedSettings.showBaldiSetting = settings.showBaldiSetting;
    loadedSettings.baldiMode = false;
    Object.assign(settings, loadedSettings);
  }
  localStorage.setItem('catStorySettings', JSON.stringify(settings));
} catch (e) {
  console.error('Error loading settings:', e);
}
let storyInterval;
let currentDialogueIndex = 0;
let currentStory = [];
async function generateStory(topic) {
  try {
    const response = await fetch('/api/ai_completion', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify({
        prompt: 'Create a funny story about three cats named Whiskers (a ginger cat), Whitey (a white cat), and Blacky (a black cat) discussing or doing something related to: ' + topic + '. The story should have multiple dialogue exchanges between the cats. <typescript-interface>interface Response { dialogues: Array<{ cat: "Whiskers" | "Whitey" | "Blacky"; text: string; }>; }</typescript-interface> <example>{ "dialogues": [{"cat": "Whiskers", "text": \'I\'ve got a foolproof plan to catch mice!\'},{"cat": "Whitey", "text": "Oh really? Last time your plan involved a rubber band and cheese..."},{"cat": "Blacky", "text": "That was a disaster! I still have cheese in my fur!"}</example>',
        data: topic
      })
    });
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error generating story:', error);
    if (Math.random() < 0.1) {
      alert('copy this link to youtube :) : https://www.youtube.com/watch?v=9OAGajTnQ2Q');
    } else {
      alert('Error generating story. Please try again.');
    }
    return null;
  }
}
function showDialogue(cat, text) {
  const catElement = document.querySelector(`#${cat.toLowerCase()} .speech-bubble`);
  catElement.textContent = text;
  catElement.classList.add('visible');
}
function hideAllDialogues() {
  document.querySelectorAll('.speech-bubble').forEach(bubble => {
    bubble.classList.remove('visible');
  });
}
function stopStory() {
  if (storyInterval) {
    clearInterval(storyInterval);
  }
  hideAllDialogues();
  currentDialogueIndex = 0;
  document.getElementById('suggest').disabled = false;
  document.getElementById('loading').classList.remove('visible');
}
const catDetails = {
  whiskers: {
    name: "Whiskers",
    image: "cat-png-cute-cat-free-hd-download-transparent-png-454585-2.png",
    appearance: "A handsome ginger cat with distinctive white paws and chest. His fur has beautiful orange stripes and he has bright, curious green eyes. His whiskers are particularly long and expressive, hence his name.",
    gender: "Male",
    personality: "Playful and adventurous, Whiskers is often the mastermind behind the trio's schemes. He's curious to a fault and has an endless appetite for both food and fun. Despite his mischievous nature, he's incredibly loyal to his friends.",
    trivia: "• Holds the neighborhood record for most mice caught in a single day (7)\n• Can open doors by jumping and hanging on door handles\n• Has a secret stash of bottle caps he's collected over the years\n• Once accidentally locked himself in the neighbor's garage for 3 days"
  },
  whitey: {
    name: "Whitey",
    image: "Kit-Cat.png",
    appearance: "A stunning British Shorthair with luxurious grey fur and striking green eyes. Despite the name 'Whitey', she's actually a beautiful shade of blue-grey, typical of her breed.",
    gender: "Female",
    personality: "The voice of reason in the group, Whitey is sophisticated and elegant. She enjoys maintaining her pristine appearance but isn't afraid to join in on adventures. She often finds herself mediating between her more rambunctious friends.",
    trivia: "• Won 'Best in Show' at the local cat show three years running\n• Can predict rainy weather by sleeping upside down\n• Has never knocked over a glass (unlike her friends)\n• Speaks in her sleep, usually about tuna"
  },
  blacky: {
    name: "Blacky",
    image: "Transparent-Cats-2-e1720643829976-resized.png",
    appearance: "A sleek tuxedo cat with a glossy black coat and crisp white markings on the chest and paws. Has striking yellow eyes and always appears to be wearing a formal suit.",
    gender: "Male",
    personality: "The dramatic one of the group, Blacky has a flair for the theatrical. He can be a bit of a worrier but his loyalty to his friends always overcomes his cautious nature. He's surprisingly graceful and takes pride in his tuxedo-like markings.",
    trivia: "• Successfully auditioned for a cat food commercial\n• Can balance on one paw for over a minute\n• Has a special meow just for butterflies\n• Once scared away a burglar by knocking over an entire bookshelf"
  }
};
const modal = document.getElementById('catModal');
const modalImage = document.getElementById('modalImage');
const modalName = document.getElementById('modalName');
const modalAppearance = document.getElementById('modalAppearance');
const modalGender = document.getElementById('modalGender');
const modalPersonality = document.getElementById('modalPersonality');
function showCatDetails(catId) {
  const cat = catDetails[catId];
  modalImage.src = cat.image;
  modalImage.alt = `${cat.name} - ${cat.gender} cat`;
  modalName.textContent = cat.name;
  modalAppearance.textContent = cat.appearance;
  modalGender.textContent = cat.gender;
  modalPersonality.textContent = cat.personality;
  document.getElementById('modalTrivia').textContent = cat.trivia;
  modal.classList.add('visible');
}
document.querySelectorAll('.cat').forEach(cat => {
  cat.addEventListener('click', () => {
    showCatDetails(cat.id);
  });
});
document.querySelector('.close-modal').addEventListener('click', () => {
  modal.classList.remove('visible');
  galleryModal.classList.remove('visible');
  settingsPanel.classList.remove('visible');
});
window.addEventListener('click', event => {
  if (event.target === modal) {
    modal.classList.remove('visible');
  }
  if (event.target === galleryModal) {
    galleryModal.classList.remove('visible');
  }
  if (event.target === settingsPanel) {
    settingsPanel.classList.remove('visible');
  }
  if (event.target === faqModal) {
    faqModal.classList.remove('visible');
  }
});
document.getElementById('suggest').addEventListener('click', async () => {
  const topic = document.getElementById('topic').value;
  if (!topic) {
    alert('Please enter a topic first!');
    return;
  }
  stopStory();
  const suggestButton = document.getElementById('suggest');
  suggestButton.disabled = true;
  document.getElementById('loading').classList.add('visible');
  const storyData = await generateStory(topic);
  if (!storyData || !storyData.dialogues) {
    alert('Error generating story. Please try again.');
    suggestButton.disabled = false;
    document.getElementById('loading').classList.remove('visible');
    return;
  }
  currentStory = storyData.dialogues;
  currentDialogueIndex = 0;
  document.getElementById('loading').classList.remove('visible');
  storyInterval = setInterval(() => {
    if (!currentStory || currentDialogueIndex >= currentStory.length) {
      stopStory();
      return;
    }
    const dialogue = currentStory[currentDialogueIndex];
    hideAllDialogues();
    showDialogue(dialogue.cat, dialogue.text);
    currentDialogueIndex++;
  }, settings.storySpeed * 1000);
});
document.getElementById('stop').addEventListener('click', stopStory);
window.addEventListener('load', () => {
  clearInterval(storyInterval);
});
const tips = ["Click on any cat to learn more about them!", "Type a topic in the input box to generate a story", "The cats will take turns telling their story", "Click the Stop Story button to reset the dialogue", "Try different topics to get varied stories!"];
let currentTipIndex = 0;
const tipElement = document.getElementById('tipText');
function rotateTips() {
  tipElement.classList.remove('visible');
  setTimeout(() => {
    currentTipIndex = (currentTipIndex + 1) % tips.length;
    tipElement.textContent = tips[currentTipIndex];
    tipElement.classList.add('visible');
  }, 500);
}
let tipInterval = setInterval(rotateTips, 3000);
const galleryBtn = document.getElementById('galleryBtn');
const galleryModal = document.getElementById('galleryModal');
galleryBtn.addEventListener('click', () => {
  noticeAudio.currentTime = 0;
  noticeAudio.volume = 0.7;
  noticeAudio.play();
  galleryModal.classList.add('visible');
  const galleryContent = document.querySelector('.gallery-content');
  galleryContent.scrollTop = 0;
});
const noticeAudio = document.getElementById('noticeAudio');
noticeAudio.volume = 0;
const noticeSection = document.querySelector('.gallery-content > div');
let isNoticeVisible = false;
const noticeObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    isNoticeVisible = entry.isIntersecting;
    if (!isNoticeVisible) {
      fadeOutAudio();
    }
  });
}, {
  threshold: 0.1
});
noticeObserver.observe(noticeSection);
let lastScrollY = window.scrollY;
const galleryContent = document.querySelector('.gallery-content');
galleryContent.addEventListener('scroll', () => {
  if (!isNoticeVisible) return;
  const notice = document.querySelector('.gallery-content > div');
  const rect = notice.getBoundingClientRect();
  const maxDistance = window.innerHeight;
  const distance = Math.abs(rect.top);
  let volume = Math.max(0, 1 - distance / maxDistance);
  volume = Math.min(0.7, volume);
  noticeAudio.volume = volume;
});
function fadeOutAudio() {
  const fadeInterval = setInterval(() => {
    if (noticeAudio.volume <= 0.01) {
      noticeAudio.volume = 0;
      clearInterval(fadeInterval);
      return;
    }
    noticeAudio.volume = Math.max(0, noticeAudio.volume - 0.05);
  }, 50);
}
document.querySelectorAll('.close-modal').forEach(closeBtn => {
  closeBtn.addEventListener('click', () => {
    modal.classList.remove('visible');
    galleryModal.classList.remove('visible');
    settingsPanel.classList.remove('visible');
    faqModal.classList.remove('visible');
  });
});
document.getElementById('settingsBtn').addEventListener('click', () => {
  settingsPanel.classList.toggle('visible');
});
document.addEventListener('click', e => {
  if (!settingsPanel.contains(e.target) && e.target !== settingsBtn) {
    settingsPanel.classList.remove('visible');
  }
});
document.getElementById('autoPlayStories').addEventListener('change', e => {
  settings.autoPlayStories = e.target.checked;
  saveSettings();
});
document.getElementById('storySpeed').addEventListener('change', e => {
  settings.storySpeed = parseInt(e.target.value);
  saveSettings();
  clearInterval(storyInterval);
  storyInterval = setInterval(() => {
    if (!currentStory || currentDialogueIndex >= currentStory.length) {
      stopStory();
      return;
    }
    const dialogue = currentStory[currentDialogueIndex];
    hideAllDialogues();
    showDialogue(dialogue.cat, dialogue.text);
    currentDialogueIndex++;
  }, settings.storySpeed * 1000);
});
document.getElementById('theme').addEventListener('change', e => {
  settings.theme = e.target.value;
  applyTheme(); 
  saveSettings();
});
document.getElementById('baldiMode').addEventListener('change', e => {
  settings.baldiMode = e.target.checked;
  saveSettings();
  const baldiOverlay = document.getElementById('baldiOverlay');
  if (settings.baldiMode) {
    baldiOverlay.classList.add('visible');
    baldiAudio.play();
  } else {
    baldiOverlay.classList.remove('visible');
    baldiAudio.pause();
    baldiAudio.currentTime = 0;
  }
});
const baldiAudio = new Audio('the luckiest baldi\'s basics win.wav');
baldiAudio.loop = true;
function saveSettings() {
  try {
    localStorage.setItem('catStorySettings', JSON.stringify(settings));
  } catch (e) {
    console.error('Error saving settings:', e);
  }
}
function applyTheme() {
  if (settings.theme === 'dark') {
    document.body.style.backgroundColor = '#222';
    document.body.style.color = '#fff';
  } else {
    document.body.style.backgroundColor = '#fff';
    document.body.style.color = '#000';
  }
}
applyTheme();
tipInterval = setInterval(rotateTips, 3000);
document.querySelector('.close-notice').addEventListener('click', function () {
  const notice = this.parentElement;
  notice.style.opacity = '0';
  setTimeout(() => {
    notice.remove();
  }, 500);
});
const faqBtn = document.getElementById('faqBtn');
const faqModal = document.getElementById('faqModal');
faqBtn.addEventListener('click', () => {
  faqModal.classList.add('visible');
});</script>
</body></html>