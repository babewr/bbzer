    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portugal: Clash of Regions - The Civil War Simulation</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'VT323', monospace;
            background: #000000;
            color: #00FF00;
            height: 100vh;
            overflow: hidden;
            cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2lqtNwkPAorWqpfmli3PBbkgRFQMlhARH5DURx1AVfvx5Vo8QTW7UF5mNxBmNgLQ2zQDsANAC4IXYAMmHGBJC7U6YAHgAVfNrxSATQ0LAKsGZqVU5VUALQpwUoCbAtjtAm4KYGTxb2uy7ixXVoCbApw0gFMLuPWAq3dACm4d34GLHE9T8Emj3EXBriqG2W6wFldMeLvCoxNeNn8fMD4c8QhV5fRxxKgHHx+QEGgOEOTGAFpgFaCb12z+v/0Wor1aMGx3V6MAAAAASUVORK5CYII='), auto;
        }

        #container {
            display: flex;
            height: 100vh;
        }

        #map-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        #sidebar {
            width: 300px;
            background: linear-gradient(45deg, #8A2BE2, #4B0082);
            padding: 20px;
            box-shadow: -5px 0 15px rgba(0, 255, 255, 0.5);
            overflow-y: auto;
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 24px;
            text-align: center;
            color: #00FFFF;
            text-shadow: 2px 2px #FF00FF, -2px -2px #00FF00;
            margin-bottom: 20px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.5; }
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #00FFFF;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 15px;
            box-shadow: 0 0 10px #00FFFF;
        }

        .stat-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 14px;
            color: #FF00FF;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 18px;
            color: #00FFFF;
        }

        #time-display {
            font-family: 'Press Start 2P', cursive;
            font-size: 18px;
            text-align: center;
            margin-top: 20px;
            color: #FFFF00;
            text-shadow: 2px 2px #FF00FF;
        }

        #controls {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .control-btn {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            padding: 10px;
            background: linear-gradient(to bottom, #00FFFF, #0080FF);
            border: none;
            border-radius: 5px;
            color: #000000;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 10px #00FFFF;
        }

        .control-btn:hover {
            background: linear-gradient(to bottom, #FF00FF, #FF1493);
            color: #FFFFFF;
            transform: scale(1.1);
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: #00FFFF;
            padding: 5px;
            border-radius: 5px;
            font-size: 14px;
            pointer-events: none;
        }

        #disclaimer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #000000;
            border: 3px solid #00FFFF;
            padding: 20px;
            color: #FFFFFF;
            font-family: 'Press Start 2P', cursive;
            font-size: 14px;
            text-align: center;
            z-index: 1000;
            display: none;
        }

        #disclaimer-btn {
            margin-top: 10px;
            padding: 5px 10px;
            background: #00FFFF;
            color: #000000;
            border: none;
            cursor: pointer;
        }

        .expandable-tab {
            margin-top: 15px;
        }

        .tab-header {
            background: linear-gradient(to right, #00FFFF, #0080FF);
            padding: 5px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 14px;
            color: #000000;
            text-align: center;
            border-radius: 5px 5px 0 0;
        }

        .tab-content {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            display: none;
            border: 2px solid #00FFFF;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }

        #winning-chances {
            width: 100%;
            height: 150px;
            margin-top: 20px;
        }

        @keyframes glitch {
            0% {
                text-shadow: 0.05em 0 0 #00FFD5, -0.05em -0.025em 0 #00FFFF,
                    -0.025em 0.05em 0 #FF00FF;
            }
            14% {
                text-shadow: 0.05em 0 0 #00FFD5, -0.05em -0.025em 0 #00FFFF,
                    -0.025em 0.05em 0 #FF00FF;
            }
            15% {
                text-shadow: -0.05em -0.025em 0 #00FFD5, 0.025em 0.025em 0 #00FFFF,
                    -0.05em -0.05em 0 #FF00FF;
            }
            49% {
                text-shadow: -0.05em -0.025em 0 #00FFD5, 0.025em 0.025em 0 #00FFFF,
                    -0.05em -0.05em 0 #FF00FF;
            }
            50% {
                text-shadow: 0.025em 0.05em 0 #00FFD5, 0.05em 0 0 #00FFFF,
                    0 -0.05em 0 #FF00FF;
            }
            99% {
                text-shadow: 0.025em 0.05em 0 #00FFD5, 0.05em 0 0 #00FFFF,
                    0 -0.05em 0 #FF00FF;
            }
            100% {
                text-shadow: -0.025em 0 0 #00FFD5, -0.025em -0.025em 0 #00FFFF,
                    -0.025em -0.05em 0 #FF00FF;
            }
        }

        .glitch {
            animation: glitch 1s infinite;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="map-container">
            <div id="map"></div>
        </div>
        <div id="sidebar">
            <h1 class="glitch">Portugal: Clash of Regions</h1>
            <div class="stat-box">
                <div class="stat-title">North Troops</div>
                <div class="stat-value" id="north-troops">40,000</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">Center Troops</div>
                <div class="stat-value" id="center-troops">35,000</div>
            </div>
            <div class="stat-box">
                <div class="stat-title">Controlled Regions</div>
                <div class="stat-value" id="controlled-regions">North: 4, Center: 4</div>
            </div>
            <div id="time-display">Year: 2025<br>Month: January</div>
            <div id="controls">
                <button class="control-btn" onclick="toggleSimulation()">Start/Stop</button>
                <button class="control-btn" onclick="resetSimulation()">Reset</button>
            </div>
            <div class="expandable-tab">
                <div class="tab-header" onclick="toggleTab('military-forces')">Military Forces</div>
                <div class="tab-content" id="military-forces">
                    <canvas id="military-graph"></canvas>
                </div>
            </div>
            <div class="expandable-tab">
                <div class="tab-header" onclick="toggleTab('world-news')">World News</div>
                <div class="tab-content" id="world-news">
                    <div id="news-ticker"></div>
                </div>
            </div>
            <div class="expandable-tab">
                <div class="tab-header" onclick="toggleTab('civilian-life')">Civilian Life</div>
                <div class="tab-content" id="civilian-life">
                    <div id="civilian-opinions"></div>
                </div>
            </div>
            <canvas id="winning-chances"></canvas>
        </div>
    </div>

    <div id="disclaimer">
        <p>This website is a simulation for educational and entertainment purposes. It does not condone or endorse war or violence. The content is purely fictional.</p>
        <button id="disclaimer-btn" onclick="hideDisclaimer()">I Understand</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <script>
        let map;
        let simulationRunning = false;
        let currentDate = new Date(2025, 0, 1);
        let northTroops = 40000;
        let centerTroops = 35000;
        let militaryChart;
        let winningChancesChart;

        const regions = [
            {name: 'Viana do Castelo', controlledBy: 'North', lat: 41.6946, lon: -8.8344},
            {name: 'Braga', controlledBy: 'North', lat: 41.5518, lon: -8.4229},
            {name: 'Porto', controlledBy: 'North', lat: 41.1579, lon: -8.6291},
            {name: 'Aveiro', controlledBy: 'North', lat: 40.6405, lon: -8.6538},
            {name: 'Coimbra', controlledBy: 'Center', lat: 40.2004, lon: -8.4167},
            {name: 'Leiria', controlledBy: 'Center', lat: 39.7467, lon: -8.8078},
            {name: 'Lisboa', controlledBy: 'Center', lat: 38.7223, lon: -9.1393},
            {name: 'Set√∫bal', controlledBy: 'Center', lat: 38.5244, lon: -8.8882}
        ];

        function initMap() {
            map = L.map('map').setView([39.6, -8.0], 7);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);

            updateMap();
        }

        function updateMap() {
            map.eachLayer((layer) => {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            regions.forEach(region => {
                const color = region.controlledBy === 'North' ? 'blue' : 'red';
                L.marker([region.lat, region.lon], {
                    icon: L.divIcon({
                        className: 'custom-div-icon',
                        html: `<div style="background-color:${color};width:10px;height:10px;border-radius:50%;"></div>`,
                        iconSize: [10, 10]
                    })
                }).addTo(map).bindPopup(`${region.name}<br>Controlled by: ${region.controlledBy}`);
            });
        }

        function initCharts() {
            const militaryCtx = document.getElementById('military-graph').getContext('2d');
            militaryChart = new Chart(militaryCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'North Troops',
                        data: [],
                        borderColor: 'blue',
                        tension: 0.1
                    }, {
                        label: 'Center Troops',
                        data: [],
                        borderColor: 'red',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            const winningChancesCtx = document.getElementById('winning-chances').getContext('2d');
            winningChancesChart = new Chart(winningChancesCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'North Winning Chance',
                        data: [],
                        borderColor: 'blue',
                        tension: 0.1
                    }, {
                        label: 'Center Winning Chance',
                        data: [],
                        borderColor: 'red',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function updateSimulation() {
            if (!simulationRunning) return;

            // Update troop numbers
            northTroops += Math.floor(Math.random() * 1000 - 500);
            centerTroops += Math.floor(Math.random() * 1000 - 500);
            document.getElementById('north-troops').textContent = northTroops.toLocaleString();
            document.getElementById('center-troops').textContent = centerTroops.toLocaleString();

            // Update date
            currentDate.setMonth(currentDate.getMonth() + 1);
            document.getElementById('time-display').innerHTML = `Year: ${currentDate.getFullYear()}<br>Month: ${currentDate.toLocaleString('default', { month: 'long' })}`;

            // Simulate battle outcomes and region control changes
            regions.forEach(region => {
                if (Math.random() > 0.8) {
                    region.controlledBy = Math.random() > 0.5 ? 'North' : 'Center';
                }
            });

            // Update controlled regions count
            const northControlled = regions.filter(r => r.controlledBy === 'North').length;
            const centerControlled = regions.filter(r => r.controlledBy === 'Center').length;
            document.getElementById('controlled-regions').textContent = `North: ${northControlled}, Center: ${centerControlled}`;

            updateMap();
            updateCharts();
            updateWorldNews();
            updateCivilianOpinions();
        }

        function updateCharts() {
            const label = `${currentDate.getFullYear()}-${currentDate.getMonth() + 1}`;
            
            militaryChart.data.labels.push(label);
            militaryChart.data.datasets[0].data.push(northTroops);
            militaryChart.data.datasets[1].data.push(centerTroops);
            if (militaryChart.data.labels.length > 12) {
                militaryChart.data.labels.shift();
                militaryChart.data.datasets.forEach(dataset => dataset.data.shift());
            }
            militaryChart.update();

            const northChance = (northTroops / (northTroops + centerTroops)) * 100;
            const centerChance = 100 - northChance;
            winningChancesChart.data.labels.push(label);
            winningChancesChart.data.datasets[0].data.push(northChance);
            winningChancesChart.data.datasets[1].data.push(centerChance);
            if (winningChancesChart.data.labels.length > 12) {
                winningChancesChart.data.labels.shift();
                winningChancesChart.data.datasets.forEach(dataset => dataset.data.shift());
            }
            winningChancesChart.update();
        }

        function updateWorldNews() {
            const newsItems = [
                "UN calls for peace talks in Portugal",
                "EU considers sanctions against warring factions",
                "Neighboring Spain increases border security",
                "Global markets react to Portuguese conflict",
                "International aid organizations mobilize resources"
            ];
            const randomNews = newsItems[Math.floor(Math.random() * newsItems.length)];
            document.getElementById('news-ticker').innerHTML = `<p class="glitch">${randomNews}</p>`;
        }

        function updateCivilianOpinions() {
            const opinions = [
                "We just want peace to return to our country",
                "Food shortages are becoming a serious problem",
                "Many families have been separated by this conflict",
                "Local businesses are struggling to survive",
                "We hope for a quick resolution to this crisis"
            ];
            const randomOpinion = opinions[Math.floor(Math.random() * opinions.length)];
            document.getElementById('civilian-opinions').innerHTML = `<p class="glitch">${randomOpinion}</p>`;
        }

        function toggleSimulation() {
            simulationRunning = !simulationRunning;
            if (simulationRunning) {
                simulationInterval = setInterval(updateSimulation, 5000);
            } else {
                clearInterval(simulationInterval);
            }
        }

        function resetSimulation() {
            currentDate = new Date(2025, 0, 1);
            northTroops = 40000;
            centerTroops = 35000;
            document.getElementById('north-troops').textContent = northTroops.toLocaleString();
            document.getElementById('center-troops').textContent = centerTroops.toLocaleString();
            document.getElementById('controlled-regions').textContent = 'North: 4, Center: 4';
            document.getElementById('time-display').innerHTML = 'Year: 2025<br>Month: January';
            regions.forEach(region => {
                region.controlledBy = ['Viana do Castelo', 'Braga', 'Porto', 'Aveiro'].includes(region.name) ? 'North' : 'Center';
            });
            updateMap();
            militaryChart.data.labels = [];
            militaryChart.data.datasets.forEach(dataset => dataset.data = []);
            militaryChart.update();
            winningChancesChart.data.labels = [];
            winningChancesChart.data.datasets.forEach(dataset => dataset.data = []);
            winningChancesChart.update();
        }

        function toggleTab(tabId) {
            const content = document.getElementById(tabId);
            content.style.display = content.style.display === 'none' ? 'block' : 'none';
        }

        function showDisclaimer() {
            document.getElementById('disclaimer').style.display = 'block';
        }

        function hideDisclaimer() {
            document.getElementById('disclaimer').style.display = 'none';
        }

        window.onload = function() {
            initMap();
            initCharts();
            showDisclaimer();
        };
    </script>
</body></html>